--------------------------------- BEGIN -------------------------------------
CommitID: 442a6f84e769d1aae9f9c00916e30e45bccc96d0
Filename: fibo.py
Additions: 5
Deletions: 0
Changes: 5
Status: added
Content: @@ -0,0 +1,5 @@
+def fibonacci_ruim(n):
+    if n <= 1:
+        return n
+    else:
+        return fibonacci_ruim(n-1) + fibonacci_ruim(n-2)
\ No newline at end of file
--------------------------------- END -------------------------------------
--------------------------------- BEGIN -------------------------------------
CommitID: 9e54d24fef4f38824329e3a72a172215e1e9b1c8
Filename: .github/workflows/invoke-go-script-on-tag.yml
Additions: 42
Deletions: 12
Changes: 54
Status: modified
Content: @@ -7,24 +7,54 @@ on:
 jobs:
   invoke-go-script:
     runs-on: ubuntu-latest
-    if: github.event.label.name == 'ai-reviewer'
+    if: github.event.label.name == 'test'
     steps:
     
+    - name: List directories after checkout
+      run: ls -la
+
     - uses: actions/checkout@v2
       with:
         repository: 'lucasmbaia/power-actions'
         path: 'power-actions'
-        ref: 'main'
-        #token: ${{ secrets.ACTIONS_REPO_KEY }}
+        ref: 'main' # Especifica a branch main
+        token: ${{ secrets.ACTIONS_REPO_KEY }}
+        fetch-depth: 0 # Para ter todo o histÃ³rico de commits
+        
+    - name: List directories after checkout
+      run: ls -la
+
+    - name: Checkout PR
+      uses: actions/checkout@v2
+      with:
+        ref: ${{ github.event.pull_request.head.ref }}
         fetch-depth: 0
-                
-    - name: Invoke PR Review
-      run: go run main.go
+        path: 'pr-code'
+        
+    - name: List directories after checkout
+      run: ls -la
+
+    - name: Generate diffs
+      run: |
+        cd pr-code
+        git diff --name-only ${{ github.event.pull_request.base.sha }} ${{ github.event.pull_request.head.sha }} | while read file; do
+          git diff ${{ github.event.pull_request.base.sha }} ${{ github.event.pull_request.head.sha }} -- "$file" > "${file//\//_}.diff"
+        done
+        # git diff ${{ github.event.pull_request.base.sha }} ${{ github.event.pull_request.head.sha }} > ../power-actions/diffs.txt
+
+    - name: List directory structure
+      run: ls -la
+      
+    - name: List directory structure pr-code
+      run: ls -la pr-code
+
+    - name: Invoke Go Script
+      run: go run main.go ../pr-code
       working-directory: ./power-actions
       env:
-        GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }} # Github bot token
-        OPENAI_TOKEN: ${{ secrets.OPENAI_TOKEN }} # Openai Token
-        GITHUB_OWNER: ${{ github.repository_owner }} # Name of reporitory's owner
-        GITHUB_REPO: ${{ github.repository }} # Name of repository
-        OPENAI_MODEL: "gpt-4-1106-preview" # Model to use at OpenAI Chat
-        GITHUB_PR_NUMBER: ${{ github.event.pull_request.number }} #Number of PR
+        GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
+        OPENAI_TOKEN: ${{ secrets.OPENAI_TOKEN }}
+        GITHUB_OWNER: ${{ github.repository_owner }}
+        GITHUB_REPO: ${{ github.repository }}
+        OPENAI_MODEL: "gpt-4-1106-preview"
+        GITHUB_PR_NUMBER: ${{ github.event.pull_request.number }}
\ No newline at end of file
--------------------------------- END -------------------------------------